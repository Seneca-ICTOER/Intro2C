name: algolia-scraper
on:
# only run on push events
  push: 
    branches:
      - main
      # only run check suite events
  check_suite: 
    types: [completed]
    # only run on workflow dispatch events
  workflow_dispatch: 
jobs:
  scrape:
  # specifies the OS image to use for the job
    runs-on: ubuntu-latest 
    steps: 
      - name: check out code ðŸ›Ž
        uses: actions/checkout@v2
      - name: scrape the site ðŸ§½
      # specifies the environment variables
        env: 
          # generated when you create a project on algolia website after you sign up
          APPLICATION_ID: ${{ secrets.APPLICATION_ID }} 
          # API key be sure to have the right permissions
          WRITE_API_KEY: ${{ secrets.API_KEY }} 
          SITE_URL: ${{ secrets.SITE_URL }}
          #docusaurus or anything if you want ot change it
          INDEX_NAME: ${{ secrets.INDEX_NAME }}
          # run: create .env file and run bash script scrape.sh
        run: |
          touch .env  
          ./scrape.sh

